<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>

<!--
    HMRC Submission Hub - Navigation to submission features
    - Annual Self Assessment
    - Quarterly Updates (MTD)
    - Submission History
-->
<ScrollPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="uk.selfemploy.ui.controller.HmrcSubmissionController"
            styleClass="hmrc-scroll" fitToWidth="true" hbarPolicy="NEVER">

    <VBox styleClass="hmrc-container" spacing="24">
        <padding><Insets top="30" right="30" bottom="30" left="30"/></padding>

        <!-- Page Header -->
        <VBox spacing="8">
            <Label text="HMRC Submission" styleClass="page-title"/>
            <Label text="Submit your tax returns to HMRC via Making Tax Digital" styleClass="page-subtitle"/>
        </VBox>

        <!-- HMRC Connection Status -->
        <HBox fx:id="connectionStatus" styleClass="status-banner" alignment="CENTER_LEFT" spacing="12">
            <Label fx:id="statusIcon" text="â—" styleClass="status-icon"/>
            <VBox spacing="2" HBox.hgrow="ALWAYS">
                <Label fx:id="statusTitle" text="HMRC Connection" styleClass="status-title"/>
                <Label fx:id="statusMessage" text="Not connected - Click 'Connect' to authorize with HMRC" styleClass="status-message"/>
            </VBox>
            <VBox spacing="8">
                <Button fx:id="connectButton" text="Connect to HMRC" styleClass="button-primary" onAction="#handleConnect"/>
                <Button fx:id="testButton" text="Test API Connection" styleClass="button-secondary" onAction="#handleTestConnection"/>
            </VBox>
        </HBox>

        <!-- Submission Options -->
        <VBox spacing="16">
            <Label text="Submission Options" styleClass="section-title"/>

            <!-- Annual Self Assessment Card -->
            <VBox fx:id="annualCard" styleClass="feature-card" spacing="12"
                  focusTraversable="true"
                  onMouseClicked="#handleAnnualSubmission"
                  onKeyPressed="#handleAnnualSubmissionKey"
                  accessibleText="Annual Self Assessment - Submit your annual tax return">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ“‹" styleClass="feature-icon"/>
                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                        <Label text="Annual Self Assessment" styleClass="feature-title"/>
                        <Label text="Submit your annual tax return (SA100/SA103)" styleClass="feature-description"/>
                    </VBox>
                    <Label text="â€º" styleClass="feature-arrow"/>
                </HBox>
                <HBox spacing="8">
                    <Label fx:id="annualDeadlineLabel" text="Deadline: 31 January 2027" styleClass="deadline-label"/>
                </HBox>
            </VBox>

            <!-- Quarterly Updates Card (MTD) - PS11-004: Improved placeholder -->
            <VBox fx:id="quarterlyCard" styleClass="feature-card, feature-card-coming-soon" spacing="12"
                  focusTraversable="true"
                  onMouseClicked="#handleQuarterlySubmission"
                  onKeyPressed="#handleQuarterlySubmissionKey"
                  accessibleText="Quarterly Updates - Coming Q4 2025 - Required for MTD ITSA from April 2026">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="&#128197;" styleClass="feature-icon"/>
                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="Quarterly Updates" styleClass="feature-title"/>
                            <Label text="Coming Q4 2025" styleClass="coming-soon-badge"/>
                        </HBox>
                        <Label text="Submit quarterly income/expense updates (MTD ITSA)" styleClass="feature-description"/>
                    </VBox>
                    <Label text="&#8250;" styleClass="feature-arrow"/>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="Required from April 2026 for income &gt; Â£50,000" styleClass="mtd-info-label"/>
                </HBox>
            </VBox>

            <!-- Submission History Card -->
            <VBox fx:id="historyCard" styleClass="feature-card" spacing="12"
                  focusTraversable="true"
                  onMouseClicked="#handleSubmissionHistory"
                  onKeyPressed="#handleSubmissionHistoryKey"
                  accessibleText="Submission History - View past submissions and their status">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ“œ" styleClass="feature-icon"/>
                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                        <Label text="Submission History" styleClass="feature-title"/>
                        <Label text="View past submissions and their status" styleClass="feature-description"/>
                    </VBox>
                    <Label text="â€º" styleClass="feature-arrow"/>
                </HBox>
                <HBox spacing="8">
                    <Label fx:id="historyCountLabel" text="0 submissions on record" styleClass="info-label"/>
                </HBox>
            </VBox>
        </VBox>

        <!-- Important Information -->
        <VBox styleClass="info-box" spacing="8">
            <Label text="â„¹ Important Information" styleClass="info-title"/>
            <Label text="â€¢ Your data is submitted directly to HMRC via secure MTD APIs" styleClass="info-text" wrapText="true"/>
            <Label text="â€¢ All calculations are estimates - verify with a qualified accountant" styleClass="info-text" wrapText="true"/>
            <Label text="â€¢ You are responsible for the accuracy of submitted information" styleClass="info-text" wrapText="true"/>
        </VBox>

    </VBox>
</ScrollPane>

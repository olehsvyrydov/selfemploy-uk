<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>

<!--
    Settings Page - User preferences and configuration
    Provides access to:
    - Profile settings (UTR)
    - Legal documents (Terms, Privacy)
    - Data management (Export/Import)
    - Application info
-->
<ScrollPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="uk.selfemploy.ui.controller.SettingsController"
            styleClass="settings-scroll" fitToWidth="true" hbarPolicy="NEVER">

    <VBox styleClass="settings-container" spacing="24">
        <padding><Insets top="30" right="30" bottom="30" left="30"/></padding>

        <!-- Page Header -->
        <VBox spacing="8">
            <Label text="Settings" styleClass="page-title"/>
            <Label text="Configure your preferences and manage your data" styleClass="page-subtitle"/>
        </VBox>

        <!-- Profile Section -->
        <VBox styleClass="settings-section, settings-section-profile" spacing="16">
            <Label text="Profile" styleClass="section-title"/>

            <!-- UTR Setting -->
            <VBox styleClass="settings-card, settings-card-profile" spacing="12">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ“‹" styleClass="settings-icon"/>
                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                        <Label text="Unique Taxpayer Reference (UTR)" styleClass="settings-label"/>
                        <Label fx:id="utrLabel" text="Not set" styleClass="settings-value"/>
                    </VBox>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <TextField fx:id="utrField" promptText="Enter 10-digit UTR"
                               styleClass="utr-field" HBox.hgrow="ALWAYS" maxWidth="320"
                               accessibleText="Enter your 10-digit Unique Taxpayer Reference"/>
                    <Button fx:id="saveUtrButton" text="Save" styleClass="button-secondary" onAction="#handleSaveUtr"/>
                </HBox>
                <Label text="Your UTR is required for HMRC submissions. Find it on your Self Assessment notices or online account."
                       styleClass="settings-hint" wrapText="true"/>
            </VBox>
        </VBox>

        <!-- Legal Section -->
        <VBox styleClass="settings-section, settings-section-legal" spacing="16">
            <Label text="Legal" styleClass="section-title"/>

            <!-- Terms of Service -->
            <HBox styleClass="settings-card-row, settings-card-legal" alignment="CENTER_LEFT" spacing="12">
                <Label text="ðŸ“„" styleClass="settings-icon"/>
                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label text="Terms of Service" styleClass="settings-label"/>
                    <Label text="View the application terms and conditions" styleClass="settings-description"/>
                </VBox>
                <Button fx:id="termsButton" text="View" styleClass="button-secondary" onAction="#handleShowTerms"/>
            </HBox>

            <!-- Privacy Notice -->
            <HBox styleClass="settings-card-row, settings-card-legal" alignment="CENTER_LEFT" spacing="12">
                <Label text="ðŸ›¡" styleClass="settings-icon"/>
                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label text="Privacy Notice" styleClass="settings-label"/>
                    <Label text="View how your data is handled" styleClass="settings-description"/>
                </VBox>
                <Button fx:id="privacyButton" text="View" styleClass="button-secondary" onAction="#handleShowPrivacy"/>
            </HBox>
        </VBox>

        <!-- Data Management Section -->
        <VBox styleClass="settings-section, settings-section-data" spacing="16">
            <Label text="Data Management" styleClass="section-title"/>

            <!-- Export Data -->
            <HBox styleClass="settings-card-row, settings-card-data" alignment="CENTER_LEFT" spacing="12">
                <Label text="ðŸ“¤" styleClass="settings-icon"/>
                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label text="Export Data" styleClass="settings-label"/>
                    <Label text="Export your income, expenses, and tax data to a file" styleClass="settings-description"/>
                </VBox>
                <Button fx:id="exportButton" text="Export" styleClass="button-secondary" onAction="#handleExportData"/>
            </HBox>

            <!-- Import Data -->
            <HBox styleClass="settings-card-row, settings-card-data" alignment="CENTER_LEFT" spacing="12">
                <Label text="ðŸ“¥" styleClass="settings-icon"/>
                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label text="Import Data" styleClass="settings-label"/>
                    <Label text="Import data from a previously exported file" styleClass="settings-description"/>
                </VBox>
                <Button fx:id="importButton" text="Import" styleClass="button-secondary" onAction="#handleImportData"/>
            </HBox>
        </VBox>

        <!-- About Section -->
        <VBox styleClass="settings-section, settings-section-about" spacing="16">
            <Label text="About" styleClass="section-title"/>

            <VBox styleClass="settings-card, settings-card-about" spacing="8">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="SE" styleClass="about-logo"/>
                    <VBox spacing="4">
                        <Label text="UK Self-Employment Manager" styleClass="settings-label"/>
                        <Label fx:id="versionLabel" text="Version 0.1.0-SNAPSHOT" styleClass="settings-value"/>
                    </VBox>
                </HBox>
                <Label text="A free, open-source application for UK self-employed individuals to manage their accounting and submit tax returns to HMRC."
                       styleClass="settings-description" wrapText="true"/>
                <HBox spacing="16">
                    <Hyperlink text="GitHub Repository" styleClass="about-link" onAction="#handleGitHubLink"/>
                    <Hyperlink text="Report an Issue" styleClass="about-link" onAction="#handleReportIssueLink"/>
                </HBox>
            </VBox>
        </VBox>

        <!-- Footer Disclaimer -->
        <VBox styleClass="settings-disclaimer" spacing="8">
            <Label text="âš  Important" styleClass="disclaimer-title"/>
            <Label text="This application provides tax estimates only. Always verify calculations with a qualified accountant before submitting to HMRC. You are responsible for the accuracy of your tax returns."
                   styleClass="disclaimer-text" wrapText="true"/>
        </VBox>

    </VBox>
</ScrollPane>

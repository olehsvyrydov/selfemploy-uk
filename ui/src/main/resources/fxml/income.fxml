<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.Cursor?>
<?import javafx.geometry.Insets?>

<ScrollPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="uk.selfemploy.ui.controller.IncomeController"
            styleClass="page-scroll"
            fitToWidth="true" hbarPolicy="NEVER">

    <VBox fx:id="incomeContainer" styleClass="page-container" spacing="24">
        <padding><Insets top="30" right="30" bottom="30" left="30"/></padding>

        <!-- Page Header -->
        <HBox alignment="CENTER_LEFT" spacing="15">
            <Label text="Income" styleClass="page-title"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="addIncomeBtn" text="+ Add Income"
                    styleClass="button-success" onAction="#handleAddIncome"/>
        </HBox>

        <!-- Summary Cards - Bento Grid Layout -->
        <HBox styleClass="summary-cards-container" spacing="16">
            <!-- Total Income Card -->
            <VBox styleClass="summary-card, summary-card-income-total" HBox.hgrow="ALWAYS" spacing="8">
                <Label text="TOTAL INCOME" styleClass="metric-label"/>
                <Label fx:id="totalValue" text="£0.00" styleClass="summary-card-value, summary-card-value-income"/>
                <Label fx:id="totalCount" text="0 entries" styleClass="label-secondary"/>
            </VBox>

            <!-- Paid Card -->
            <VBox styleClass="summary-card, summary-card-income-paid" HBox.hgrow="ALWAYS" spacing="8">
                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Label text="PAID" styleClass="metric-label"/>
                    <Label fx:id="paidHelpIcon" text="i" styleClass="info-icon-circle"
                           onMouseClicked="#handlePaidHelp">
                        <cursor><Cursor fx:constant="HAND"/></cursor>
                        <tooltip><Tooltip text="Click to learn more about paid income"/></tooltip>
                    </Label>
                </HBox>
                <Label fx:id="paidValue" text="£0.00" styleClass="summary-card-value, summary-card-value-paid"/>
                <Label fx:id="paidCount" text="0 entries" styleClass="label-secondary"/>
            </VBox>

            <!-- Unpaid Card -->
            <VBox styleClass="summary-card, summary-card-income-unpaid" HBox.hgrow="ALWAYS" spacing="8">
                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Label text="UNPAID" styleClass="metric-label"/>
                    <Label fx:id="unpaidHelpIcon" text="i" styleClass="info-icon-circle"
                           onMouseClicked="#handleUnpaidHelp">
                        <cursor><Cursor fx:constant="HAND"/></cursor>
                        <tooltip><Tooltip text="Click to learn more about unpaid income"/></tooltip>
                    </Label>
                </HBox>
                <Label fx:id="unpaidValue" text="£0.00" styleClass="summary-card-value, summary-card-value-unpaid"/>
                <Label fx:id="unpaidCount" text="0 entries" styleClass="label-secondary"/>
            </VBox>
        </HBox>

        <!-- Filters Bar -->
        <HBox styleClass="filters-bar" alignment="CENTER_LEFT" spacing="16">
            <ComboBox fx:id="statusFilter" promptText="All Status" prefWidth="140"/>
            <Region HBox.hgrow="ALWAYS"/>
            <TextField fx:id="searchField" promptText="Search by client or description..."
                       prefWidth="280" styleClass="search-field"/>
        </HBox>

        <!-- Income Table -->
        <TableView fx:id="incomeTable" styleClass="data-table" VBox.vgrow="ALWAYS" minHeight="300">
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
            </columnResizePolicy>
            <columns>
                <TableColumn fx:id="dateColumn" text="DATE" prefWidth="100" minWidth="100"/>
                <TableColumn fx:id="clientColumn" text="CLIENT NAME" prefWidth="180"/>
                <TableColumn fx:id="descriptionColumn" text="DESCRIPTION" prefWidth="240"/>
                <TableColumn fx:id="amountColumn" text="AMOUNT" prefWidth="120" minWidth="100"/>
                <TableColumn fx:id="statusColumn" text="STATUS" prefWidth="90" minWidth="90"/>
            </columns>
            <placeholder>
                <Label text="No income entries found" styleClass="empty-table-message"/>
            </placeholder>
        </TableView>

        <!-- Pagination -->
        <HBox fx:id="paginationBar" styleClass="pagination-bar" alignment="CENTER" spacing="20">
            <Label fx:id="resultCount" text="Showing 0 entries" styleClass="label-secondary"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="prevBtn" text="&lt; Previous" styleClass="button-secondary"
                    onAction="#handlePrevPage" disable="true"/>
            <Button fx:id="nextBtn" text="Next &gt;" styleClass="button-secondary"
                    onAction="#handleNextPage" disable="true"/>
        </HBox>

        <!-- Empty State -->
        <VBox fx:id="emptyState" styleClass="empty-state-container"
              alignment="CENTER" spacing="16" managed="false" visible="false">
            <padding><Insets topRightBottomLeft="60"/></padding>
            <Label text="No Income Recorded" styleClass="empty-state-title"/>
            <Label text="Start tracking your earnings by adding your first income entry."
                   styleClass="empty-state-message" wrapText="true" textAlignment="CENTER" maxWidth="400"/>
        </VBox>

    </VBox>
</ScrollPane>

# UK Self-Employment Manager - Application Configuration

# Application Info
quarkus.application.name=uk-self-employment-manager
quarkus.application.version=0.1.0-SNAPSHOT

# Database Configuration (H2 with encryption)
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:file:${user.home}/.selfemploy/data;CIPHER=AES
quarkus.datasource.username=sa
quarkus.datasource.password=selfemploy

# Hibernate ORM
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

# Flyway Migrations
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration

# HMRC API Configuration (Sandbox by default)
hmrc.api.base-url=https://test-api.service.hmrc.gov.uk
hmrc.api.client-id=${HMRC_CLIENT_ID:}
hmrc.api.client-secret=${HMRC_CLIENT_SECRET:}
hmrc.api.redirect-uri=http://localhost:8088/oauth/callback

# HMRC API Resilience Configuration (SE-405)
# Retry settings
hmrc.retry.max-attempts=3
hmrc.retry.initial-delay-ms=1000
hmrc.retry.multiplier=2.0
hmrc.retry.max-delay-ms=30000

# Timeout settings
hmrc.timeout-ms=30000

# Circuit breaker settings
hmrc.circuit-breaker.request-volume-threshold=4
hmrc.circuit-breaker.failure-ratio=0.5
hmrc.circuit-breaker.delay-ms=30000
hmrc.circuit-breaker.success-threshold=2

# Logging
quarkus.log.level=INFO
quarkus.log.category."uk.selfemploy".level=DEBUG

# Native Build Configuration
quarkus.native.resources.includes=fxml/**,css/**,images/**
